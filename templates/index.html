<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Gesture Player</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Socket IO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    
    <!-- Toasts -->
    <div id="toast-container"></div>

    <header>
        <div class="logo">ANTIGRAVITY <span class="sub-logo">CONTROLLER</span></div>
        <div class="status-bar">
            <div class="status-item">
                <div class="dot" id="connection-status"></div>
                <span>Server Connected</span>
            </div>
            <div class="status-item">
                <div class="dot" id="cam-status"></div>
                <span>Camera Active</span>
            </div>
        </div>
    </header>

    <main>
        <!-- LEFT PANEL: Camera & Logic -->
        <aside class="left-panel">
            <div class="glass-panel" style="height: 100%;">
                <h3>Live Feed</h3>
                <div class="cam-feed-container">
                    <img src="{{ url_for('video_feed') }}" class="cam-feed" alt="Webcam Feed">
                </div>
                
                <h3>Recent Gestures</h3>
                <div class="gesture-history" id="gesture-history-list">
                    <!-- Items added by JS -->
                </div>
            </div>
        </aside>

        <!-- CENTER PANEL: Video Player -->
        <section class="video-section">
            <div class="video-container glass-panel" style="padding:0; border:none;">
                <!-- Default video or empty state -->
                <video id="main-video" controls>
                    <source src="" type="video/mp4">
                    Your browser does not support HTML5 video.
                </video>
            </div>
            
            <div class="upload-btn-container">
                <label for="video-upload" class="upload-btn">
                    Upload Video File
                </label>
                <input type="file" id="video-upload" accept=".mp4, .mkv, .avi" style="display: none;">
            </div>
        </section>

        <!-- RIGHT PANEL: Help & Legend -->
        <aside class="right-panel">
            <div class="glass-panel" style="height: 100%;">
                <h3>Gesture Legend</h3>
                
                <div class="legend-item">
                    <div class="legend-icon">üñêÔ∏è</div>
                    <div class="legend-text">
                        <strong>Open Palm</strong>
                        <span>Play Video</span>
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-icon">‚úä</div>
                    <div class="legend-text">
                        <strong>Closed Fist</strong>
                        <span>Pause Video</span>
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-icon">üëç</div>
                    <div class="legend-text">
                        <strong>Thumb Up</strong>
                        <span>Volume Up</span>
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-icon">üëé</div>
                    <div class="legend-text">
                        <strong>Thumb Down</strong>
                        <span>Volume Down</span>
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-icon">üëà</div>
                    <div class="legend-text">
                        <strong>Swipe Left</strong>
                        <span>Rewind 10s</span>
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-icon">üëâ</div>
                    <div class="legend-text">
                        <strong>Swipe Right</strong>
                        <span>Fast Forward 10s</span>
                    </div>
                </div>
            </div>
        </aside>
    </main>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
